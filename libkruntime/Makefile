LIBKRUNTIME_CFLAGS =	-Wall -shared -fPIC

ifeq (${ENABLE_JAVA},1)
LIBKRUNTIME_CFLAGS += -DWITH_JAVA=1
endif

all: libkruntime.so

.PHONY: clean

libkruntime.so: libkruntime.c
	${CC} ${JAVA_CPPFLAGS} ${JAVA_CFLAGS} ${LIBKRUNTIME_CFLAGS} ${CFLAGS} \
		${CPPFLAGS} ${JAVA_LDFLAGS} ${LDFLAGS} libkruntime.c \
		-o libkruntime.so

clean:
	rm -f libkruntime.so
